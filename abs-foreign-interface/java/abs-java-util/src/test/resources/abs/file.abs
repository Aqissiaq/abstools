module Example.File;

export *;

import * from FLI.FileUtils;
import * from FLI.SystemUtils;  

{
	System sys = new System();
	FileHandler handler = new FileHandler();
	FileWriter writer = new FileWriter();
	FileReader reader = new FileReader();
	
	String line = "This is line1";
	String line2 = "This is line2";
	File file = File("hello.txt");
	
	handler.setFile(file);
	writer.setFile(file);
	reader.setFile(file);
	
	String fullName = handler.getAbsolutePath();
	Bool b = handler.createNewFile();
	if (b) {
		sys.outPrintln(fullName + " created");
	} else {
		sys.outPrintln(fullName + " not created");
		assert False;
	}
	
	b = writer.open();
	if (b) {
		sys.outPrintln("Writing to: "+fullName);
		writer.writeln(line);
		writer.writeln(line2);
	} else {
		sys.outPrintln("Cannot open: "+fullName);
		assert False;
	}
	writer.close();
	
	b = reader.open();
	if (b) {
		sys.outPrintln("Reading from: "+fullName);
		String ln = reader.readLine();
		while (ln != "") {
			sys.outPrintln(ln);			
			ln = reader.readLine();
		}
	} else {
		sys.outPrintln("Cannot open: "+fullName);
		assert False;
	}
	reader.close();
	
	b = handler.delete();
	if (b) {
		sys.outPrintln(fullName + " deleted");
	} else {
		sys.outPrintln(fullName + " not deleted");
		assert False;
	}

}