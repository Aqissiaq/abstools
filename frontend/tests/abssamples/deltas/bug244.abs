// ******************************************************************
module Core;
export *;
interface Application { Int calculate(Int n); }
class ApplicationImpl implements Application {
    Int calculate(Int n) { return n + 1; }
}

// ******************************************************************
module Deltas;
export *;
import * from Core;

delta MyDelta {
  modifies class ApplicationImpl {
    modifies Int calculate(Int n) {
      Int result = original(n);
      return result + 1;
    }
  }
}

delta D2 {}
delta D3 {}

// ******************************************************************
module Products;
import * from Core;
import * from Deltas;

delta MyOtherDelta {}

productline ProductLine {
  features F1;
  delta MyDelta when F1;
  delta MyOtherDelta when F1;
}

product P1(F1) { }

{
  Application app = new ApplicationImpl();
  Int result = app.calculate(10);
  assert result == 11;
}

